<div *ngIf="shop && !loading.isRunning(); else loadingTemplate">
    <div class="row no-gutters merchant mb-3">
        <div class="col">
            <div class="merchant__profile-container">
                <img *ngIf="shop?.profileImage" class="merchant__profile" [src]="environment.IMAGE_URL + shop?.profileImage" alt="profile-image" />
                <img class="merchant__profile-background my-1 center" src="assets/images/png/icon-with-profile-image.png" alt="profile-background" />
                <p class="merchant__name mb-0 text-break">{{ shop?.name }}</p>
                <p class="merchant__username mb-0">@{{ shop?.username }}</p>
            </div>
        </div>
        <div class="col-lg-9 merchant-background position-relative">
            <img class="merchant-background__banner" *ngIf="shop?.bannerImage" [src]="environment.IMAGE_URL + shop?.bannerImage" alt="banner" />
            <ul class="merchant__nav nav position-absolute" style="bottom: 0; right: 0">
                <li class="merchant__nav-item nav-item">
                    <a (click)="scrollTo('new-items')" class="merchant__nav-link nav-link">New</a>
                </li>
                <li class="merchant__nav-item nav-item">
                    <a (click)="scrollTo('info')" class="merchant__nav-link nav-link">Info</a>
                </li>
                <li class="merchant__nav-item nav-item">
                    <a (click)="scrollTo('items')" class="merchant__nav-link nav-link">Items</a>
                </li>
            </ul>
        </div>
    </div>

    <div id="new-items" class="new-items-container mb-3">
        <swiper [config]="{breakpoints: {'992': {slidesPerView: 4, spaceBetween: 10, slidesPerGroup: 4}, '768': { slidesPerView: 3, spaceBetween: 10, slidesPerGroup: 3}, '425': {slidesPerView: 2, spaceBetween: 10, slidesPerGroup: 2}}, slidesPerView: 1}">
            <item [item]="item" [index]="i" *ngFor="let item of newItems; let i = index" class="mb-5"></item>
        </swiper>
    </div>

    <div id="info" class="information-container mb-3" *ngIf="shop?.informationImages?.length > 0">
        <swiper [config]="{navigation: false, autoHeight: true}">
            <div *ngFor="let image of shop?.informationImages">
                <img class="d-block center swiper-container__image" style="width:100%;" [src]="environment.IMAGE_URL + image" alt="upload-image" />
            </div>
        </swiper>
    </div>

    <div id="discount-items" *ngIf="discountItems.length" class="discount-items-container mb-3">
        <swiper [config]="{breakpoints: {'992': {slidesPerView: 4, spaceBetween: 10}}, slidesPerView: 1}">
            <item [routerLink]="['/item', item._id]" [item]="item" [index]="i" *ngFor="let item of discountItems; let i = index" class="mb-5"></item>
        </swiper>
    </div>

    <div id="items" class="category-container mb-3">
        <mat-select class="form-control category-container__dropdown" [(value)]="selectedCategory" (selectionChange)="getItemsByCategoryId(selectedCategory)">
            <mat-option [value]="'all'">All</mat-option>
            <mat-option [value]="category?._id" *ngFor="let category of categories">{{ category?.name }}</mat-option>
        </mat-select>
    </div>

    <div class="items-container">
        <ng-container *ngIf="!itemLoading.isRunning() && items?.length; else itemLoadingTemplate">
            <div class="row no-gutters mb-4">
                <item [routerLink]="['/item', item._id]" [item]="item" *ngFor="let item of items" class="mb-5"></item>
            </div>
            <pagination class="pb-4" [totalNo]="items.length"></pagination>
        </ng-container>
    </div>
</div>

<float-banner [element]="shop" [type]="'shop'"></float-banner>

<ng-template #loadingTemplate>
    <ws-spinner *ngIf="loading.isRunning(); else noShopTemplate" class="text-center d-block w-100" style="padding-top: 30vh"></ws-spinner>
</ng-template>
<ng-template #itemLoadingTemplate>
    <ws-spinner *ngIf="itemLoading.isRunning(); else noItemTemplate" class="text-center d-block w-100" style="padding-top: 10rem"></ws-spinner>
</ng-template>

<ng-template #noShopTemplate>
    <h6 class="text-center">Shop is not found.</h6>
</ng-template>
<ng-template #noItemTemplate>
    <h6 class="text-center">No item.</h6>
</ng-template>